<div ng-controller="organizationReference as vm">
    <md-content class="md-padding">
        <md-divider>
            <div ng-if="vm.organizations.length > 0">
                <md-subheader>Selected Organizations</md-subheader>
                <md-list>
                    <md-item ng-repeat="dr in vm.organizations track by $index">
                        <md-item-content>
                            <div class="md-tile-left">
                                <md-button ng-click="vm.removeFromList(dr)" aria-label="Remove from list">
                                    <md-icon md-svg-icon="delete" alt="Remove from list"></md-icon>
                                </md-button>
                            </div>
                            <div class="md-tile-content">
                                <h3>{{::dr.display}}</h3>
                                <p>{{::dr.reference}}</p>
                            </div>
                        </md-item-content>
                    </md-item>
                </md-list>
            </div>

            <div flex>
                <ng-form name="organizationListForm" ng-model="vm.organization">
                    <div flex style="height: 300px">
                        <md-autocomplete
                                md-no-cache="true"
                                md-selected-item-change="vm.addToList(vm.selectedOrganization)"
                                md-selected-item="vm.selectedOrganization"
                                md-search-text="vm.organizationSearchText"
                                md-items="organization in vm.getOrganizationReference(vm.organizationSearchText)"
                                md-delay="300"
                                md-min-length="3"
                                placeholder="What organization are you looking for?">
                            <span md-highlight-text="vm.organizationSearchText">{{organization.display}}</span>
                        </md-autocomplete>
                    </div>
                </ng-form>
            </div>
        </md-divider>
    </md-content>
</div>